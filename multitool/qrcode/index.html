<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QR-код генератор | Звариченко Дарья</title>
  <meta name="description" content="Генератор QR-кодов с настройкой дизайна">
  <link rel="icon" href="../../img/favicon.png" type="image/x-icon">
  
  <!-- ПОДКЛЮЧАЕМ ТОЛЬКО НОВЫЙ CSS -->
  <link rel="stylesheet" href="../../css/qrcode.css">
  
  <!-- Шрифты -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;600;700&display=swap" rel="stylesheet">
  
  <!-- Скрипты (логика генерации остается старой) -->
  <script src="../../js/script.js" defer></script>
  <script src="../../js/qrcode.js" defer></script>
  <!-- Библиотека QR -->
  <script src="https://unpkg.com/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>
  
  <!-- Yandex.Metrika (ваша старая метрика) -->
  <script type="text/javascript">
    (function (m, e, t, r, i, k, a) {
      m[i] = m[i] || function () { (m[i].a = m[i].a || []).push(arguments) };
      m[i].l = 1 * new Date();
      for (var j = 0; j < document.scripts.length; j++) { if (document.scripts[j].src === r) { return; } }
      k = e.createElement(t), a = e.getElementsByTagName(t)[0], k.async = 1, k.src = r, a.parentNode.insertBefore(k, a)
    })
      (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(103335861, "init", {
      clickmap: true,
      trackLinks: true,
      accurateTrackBounce: true,
      webvisor: true
    });
  </script>
  <noscript><div><img src="https://mc.yandex.ru/watch/103335861" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
</head>

<body>

  <!-- Шапка в стиле CubeKey, но с вашим текстом -->
  <header class="main-header">
    <div class="header-container">
      <a href="../../" class="logo-link">
        <img src="../../img/logo.png" alt="Логотип" class="header-logo">
        <div class="header-text">
          <span class="brand-name">Звариченко Дарья</span>
          <span class="brand-desc">Генератор QR-кодов</span>
        </div>
      </a>
    </div>
  </header>

  <main class="app-container">
    <div class="grid-wrapper">
      
      <!-- ЛЕВАЯ КОЛОНКА: НАСТРОЙКИ -->
      <section class="controls-panel">
        
        <div class="panel-header">
          <h2>Настройки</h2>
          <p>Создайте уникальный дизайн QR-кода</p>
        </div>

        <!-- URL -->
        <div class="control-group">
          <label for="urlInput">Ссылка (URL)</label>
          <div class="input-wrapper">
            <input type="url" id="urlInput" placeholder="https://example.com" value="https://example.com">
          </div>
        </div>

        <!-- ЦВЕТА -->
        <div class="control-group">
          <label>Цвета</label>
          <div class="color-pickers-row">
            <div class="color-field">
              <span>Фон</span>
              <div class="color-input-wrap">
                <input type="color" id="bgColor" value="#ffffff">
                <input type="text" id="bgColorHex" value="#ffffff" maxlength="7">
              </div>
            </div>
            <div class="color-field">
              <span>Код</span>
              <div class="color-input-wrap">
                <input type="color" id="dotColor" value="#000000">
                <input type="text" id="dotColorHex" value="#000000" maxlength="7">
              </div>
            </div>
          </div>
          
          <div class="checkbox-wrapper">
            <label class="custom-checkbox">
              <input type="checkbox" id="bgTransparency">
              <span class="checkmark"></span>
              <span class="label-text">Прозрачный фон</span>
            </label>
          </div>
        </div>

        <!-- ФОРМЫ -->
        <div class="control-group">
          <div class="row-2-col">
            <div>
              <label for="dotShape">Точки</label>
              <select id="dotShape">
                <option value="square">Квадрат</option>
                <option value="dots">Круг</option>
                <option value="classy">Скругленные</option>
                <option value="rounded">Мягкие</option>
                <option value="extra-rounded">Подушка</option>
              </select>
            </div>
            <div>
              <label for="markerShape">Углы</label>
              <select id="markerShape">
                <option value="square">Квадрат</option>
                <option value="dot">Круг</option>
              </select>
            </div>
          </div>
        </div>

        <!-- ЛОГОТИП -->
        <div class="control-group">
          <label>Логотип</label>
          <input type="text" id="logoInput" placeholder="Ссылка на лого (URL)" class="mb-10">
          
          <div class="file-upload-wrapper">
            <label for="logoFile" class="file-upload-btn">
              <span>Загрузить файл</span>
            </label>
            <input type="file" id="logoFile" accept="image/*">
          </div>

          <!-- Контейнер превью (скрыт по умолчанию) -->
          <div class="logo-preview-container" id="logoPreviewBlock" style="display:none;">
            <div class="preview-img-wrap">
              <img id="logoPreview" alt="Logo Preview">
              <button class="remove-logo-btn" id="removeLogo" title="Удалить">×</button>
            </div>
          </div>

          <div class="range-wrapper mt-15">
            <div class="range-header">
              <span>Размер логотипа</span>
              <span id="logoSizeValue">15%</span>
            </div>
            <input type="range" id="logoSize" min="1" max="25" value="15" class="styled-range">
          </div>
        </div>

        <!-- ОШИБКИ -->
        <div class="control-group">
          <label for="errorLevel">Коррекция ошибок</label>
          <select id="errorLevel">
            <option value="L">Low (7%)</option>
            <option value="M" selected>Medium (15%)</option>
            <option value="Q">Quartile (25%)</option>
            <option value="H">High (30%)</option>
          </select>
        </div>

      </section>

      <!-- ПРАВАЯ КОЛОНКА: ПРЕВЬЮ -->
      <section class="preview-panel">
        <div class="sticky-wrapper">
          
          <!-- Карточка с QR -->
          <div class="qr-card">
            <div class="qr-canvas-wrapper">
              <div id="qrWrapper">
                <div id="qr-code"></div>
              </div>
            </div>
          </div>

          <!-- Кнопки экспорта -->
          <div class="actions-block">
            <div class="buttons-grid" id="exportButtons">
              <button class="btn-action" data-type="png">PNG</button>
              <button class="btn-action" data-type="svg">SVG</button>
              <button class="btn-action" data-type="jpg">JPG</button>
              <button class="btn-action" data-type="pdf">PDF</button>
            </div>
          </div>

          <!-- Код настроек -->
          <div class="settings-io-block">
             <textarea id="seedArea" placeholder="Код настроек (Base64)"></textarea>
             <div class="io-buttons">
               <button class="btn-secondary" id="copySettings">Скопировать код</button>
               <button class="btn-secondary" id="loadSettingsBtn">Загрузить код</button>
             </div>
          </div>

        </div>
      </section>

    </div>
  </main>

  <div id="messageBox"></div>

</body>
</html>
